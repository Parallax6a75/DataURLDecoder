<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <script src="https://cdn.jsdelivr.net/npm/lz-string@1.5.0/libs/lz-string.min.js"></script>
</head>
<body>
<script>
  const params = new URLSearchParams(location.search);
  let encoded = params.get("data");

  function outputLink(html) {
    const compressed = LZString.compressToEncodedURIComponent(html);
    const url = location.origin + location.pathname + "?data=" + compressed;

    const a = document.createElement("a");
    a.href = url;
    a.textContent = "Your link";
    a.target = "_blank";

    document.body.appendChild(a);
    document.body.appendChild(document.createElement("br"));
    document.body.append(url);
  }

  if (!encoded) {
    const htmlInput = prompt("Enter your HTML:");
    if (!htmlInput) document.body.textContent = "No HTML provided";
    else outputLink(htmlInput);
  } else {
    const html = LZString.decompressFromEncodedURIComponent(encoded);
    if (!html) {
      document.body.textContent = "Decompression error";
    } else {
      document.write(html);
    }
  }
</script>
</body>
</html>
